@model MusicLibraryTest2.Models.SongModels

@foreach (var song in Model.SongList)
 {
    <div class="songBox">

        <p>Title: @song.Title</p>
        <p>Genre: @song.Genre</p>
        <p>Artist: @song.Artist</p>

        @if (song.AlbumName != null)
         {
            <p>Album: @song.AlbumName</p>
         }

        <p>
            <span> Likes: </span>
            <span class="likes-count" data-song-id="@song.Id">
                @song.Likes
            </span>
        </p>

        @if (!song.LikedByUser)
        {
            <button class="like-button" data-song-id="@song.Id">
                <i class="fa-regular fa-thumbs-up"></i>
            </button>
        }
        else
        {
            <button class="already-liked">
                <i class="fa-solid fa-thumbs-up"></i>
            </button>
        }

    </div>
 }

<script src="https://kit.fontawesome.com/0baa800b55.js" crossorigin="anonymous"></script>

<script>
    $(document).ready(function () {

        $('.like-button').click(function () {

            var songId = $(this).data('song-id');
            var button = $(this);
            if (button.find('.fa-regular').length > 0) {
                 $.ajax({
                    url: '/Home/AddLike',
                    type: 'GET',
                    data: { songId: songId },
                     success: function (data) {
                         button.find('.fa-thumbs-up').removeClass('fa-regular');
                         button.find('.fa-thumbs-up').addClass('fa-solid');
                        $('.likes-count[data-song-id="' + songId + '"]').text(data);
                    }
                });
            }
        });
    });
</script>