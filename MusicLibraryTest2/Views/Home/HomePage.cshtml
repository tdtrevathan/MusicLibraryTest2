@model MusicLibraryTest2.Models.ProfileModel
<head>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>

<head>
    <link rel="stylesheet" href="~/Content/Site.css" />
</head>

<body>
    <div class="mainBox">
        <!--


    <span class="toggle-button">
        <span class="triangle"></span>
        Browse All Songs
    </span>

    <div class="toggle-container" id=""></div>

    <span class="toggle-button">
        <span class="triangle"></span>
        My Playlists
    </span>

    <div class=" toggle-container" id=""></div>

    <span class=" toggle-button">
        <span class="triangle"></span>
        Liked Songs
    </span>

    <div class=" toggle-container" id=""></div>

                -->
        @if (Model.Roles.Contains("artist"))
        {
            <span class="get-add-music toggle-button">
                <span class="triangle"></span>
                Add Music
            </span>

            <div class="addMusic toggle-container" id="add-music-container"></div>

            <span class="get-albums toggle-button">
                <span class="triangle"></span>
                Albums
            </span>

            <div class="albums toggle-container" id="albums-container"></div>

            <span class="get-song-report toggle-button">
                <span class="triangle"></span>
                Songs Report
            </span>

            <div class=" toggle-container" id="song-report-container"></div>
        }

        <!--
        @if (Model.Roles.Contains("Admin"))
        {
            <span class="admin-thing toggle-button">
                <span class="triangle"></span>
                Admin Stuff
            </span>

            <div class="admin toggle-container" id="admin-container"></div>
        }
        -->

    </div>
</body>


<script>
    $(document).ready(function () {

        $('.get-add-music').click(function () {

            var loaded = false;
            var $addMusicContainer = $('#add-music-container')

            if (!loaded) {
                $.ajax({
                data: null,
                url: '/Home/AddMusic',
                    success: function(data) {
                        $addMusicContainer.html(data);
                        loaded = true;
                    }
                });
            }
            $(this).find('.triangle').toggleClass('rotate');
            $addMusicContainer.toggle();
        });
        $('.get-albums').click(function () {

            var loaded = false;
            var $albumsContainer = $('#albums-container')

            if (!loaded) {
                $.ajax({
                url: '/Home/GetUserAlbums',
                data: { userId: '@Model.Id' },
                    success: function(data) {
                        $albumsContainer.html(data);
                        loaded = true;
                    }
                });
            }
            $(this).find('.triangle').toggleClass('rotate');
            $albumsContainer.toggle();
        });
    });
</script>
